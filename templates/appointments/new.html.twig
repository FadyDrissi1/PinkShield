{% extends 'base_front.html.twig' %}

{% block title %}Nouveau Rendez-vous - PinkShield{% endblock %}

{% block body %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-7">
            
            {# Affichage des messages de succès/erreur #}
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ label == 'error' ? 'danger' : label }} alert-dismissible fade show mb-4" role="alert" style="border-radius: 15px;">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endfor %}

            <div class="card shadow-sm border-0" style="border-radius: 20px;">
                <div class="card-body p-5">
                    <h2 class="mb-4 text-center" style="color: var(--pink-primary); font-weight: 800;">
                        Prendre un Rendez-vous
                    </h2>
                    
                    <p class="text-center text-muted mb-4">Veuillez remplir le formulaire ci-dessous pour confirmer votre demande.</p>
                    
                    {# novalidate force la validation SERVEUR (PHP) pour ton examen #}
                    {{ form_start(form, {'attr': {'novalidate': 'novalidate'}}) }}
                        
                        {# Erreurs globales du formulaire #}
                        {{ form_errors(form) }}

                        <div class="mb-4">
                            <label class="form-label fw-bold">Nom du Docteur</label>
                            {{ form_widget(form.doctorname, {'attr': {
                                'class': 'form-control form-control-lg', 
                                'style': 'border-radius: 10px; border-color: #f8d7da;',
                                'placeholder': 'Ex: Dr. Ben Ammar'
                            }}) }}
                            <div class="text-danger mt-1 small fw-bold">{{ form_errors(form.doctorname) }}</div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Date & Heure souhaitée</label>
                            {{ form_widget(form.date, {'attr': {
                                'class': 'form-control form-control-lg', 
                                'style': 'border-radius: 10px; border-color: #f8d7da;'
                            }}) }}
                            <div class="text-danger mt-1 small fw-bold">{{ form_errors(form.date) }}</div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Motif de la consultation</label>
                            {{ form_widget(form.motif, {'attr': {
                                'class': 'form-control', 
                                'style': 'border-radius: 10px; border-color: #f8d7da;', 
                                'placeholder': 'Décrivez brièvement votre besoin (min. 10 caractères)...',
                                'rows': '4'
                            }}) }}
                            <div class="text-danger mt-1 small fw-bold">{{ form_errors(form.motif) }}</div>
                        </div>

                        <div class="d-grid gap-2 mt-3">
                            <button type="submit" class="btn btn-pink py-3 shadow-sm" style="font-weight: 700; font-size: 1.1rem; border-radius: 50px;">
                                <i class="bi bi-calendar-check me-2"></i> Confirmer la demande
                            </button>
                            <a href="{{ path('dashboard') }}" class="btn btn-link text-muted text-decoration-none mt-2">
                                Annuler et retourner au tableau de bord
                            </a>
                        </div>
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}